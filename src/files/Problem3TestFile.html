<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cars.js è‡ªå‹•æ¸¬è©•ç³»çµ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        .pass-icon { color: #10B981; } /* Green */
        .fail-icon { color: #EF4444; } /* Red */
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-8 flex justify-center items-start">

    <div class="w-full max-w-2xl bg-white rounded-xl shadow-lg overflow-hidden">
        <header class="bg-gray-800 text-white p-6 text-center">
            <h1 class="text-2xl font-bold">ğŸï¸ Cars.js ä½œæ¥­è‡ªå‹•æ¸¬è©•</h1>
            <p class="text-gray-400 text-sm mt-2">ç‰©ä»¶å°å‘ç¹¼æ‰¿èˆ‡å¤šå‹æª¢æŸ¥</p>
        </header>

        <div id="statusBanner" class="p-4 text-center font-bold text-lg bg-gray-200 text-gray-600">
            æº–å‚™é–‹å§‹æ¸¬è©¦...
        </div>

        <div class="p-6 space-y-4">
            <div id="testList" class="space-y-3">
                </div>
        </div>

        <div class="bg-slate-900 text-slate-300 p-6 text-sm font-mono border-t border-gray-200">
            <div class="mb-2 text-xs uppercase tracking-wider text-gray-500">System Logs</div>
            <div id="consoleLogs" class="space-y-1 h-40 overflow-y-auto"></div>
        </div>

        <div class="p-4 bg-gray-50 border-t flex justify-end">
            <button onclick="runTests()" class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded shadow transition">
                é‡æ–°æ¸¬è©¦
            </button>
        </div>
    </div>

    <script src="cars.js"></script>

    <script>
        const logArea = document.getElementById('consoleLogs');
        const listArea = document.getElementById('testList');
        const statusBanner = document.getElementById('statusBanner');
        let allPassed = true;

        function log(msg, type = 'info') {
            const div = document.createElement('div');
            div.textContent = `> ${msg}`;
            if(type === 'error') div.className = 'text-red-400';
            else if(type === 'success') div.className = 'text-green-400';
            logArea.appendChild(div);
            logArea.scrollTop = logArea.scrollHeight;
        }

        function createTestItem(title, id) {
            const div = document.createElement('div');
            div.className = "flex items-center justify-between p-3 bg-gray-50 rounded border border-gray-200";
            div.innerHTML = `
                <span class="font-medium text-gray-700">${title}</span>
                <span id="${id}" class="font-bold text-gray-400">WAITING</span>
            `;
            listArea.appendChild(div);
            return document.getElementById(id);
        }

        function updateTestStatus(element, passed, msg) {
            if (passed) {
                element.textContent = "PASS";
                element.className = "font-bold text-green-600";
                log(`[PASS] ${msg}`, 'success');
            } else {
                element.textContent = "FAIL";
                element.className = "font-bold text-red-500";
                log(`[FAIL] ${msg}`, 'error');
                allPassed = false;
            }
        }

        async function runTests() {
            // Reset UI
            listArea.innerHTML = '';
            logArea.innerHTML = '';
            allPassed = true;
            statusBanner.className = "p-4 text-center font-bold text-lg bg-blue-100 text-blue-700 animate-pulse";
            statusBanner.textContent = "æ¸¬è©¦åŸ·è¡Œä¸­...";
            
            log("é–‹å§‹è¼‰å…¥æ¸¬è©¦æ¨¡çµ„...");

            // å®šç¾©æ¸¬è©¦æ¡ˆä¾‹
            const tests = [
                {
                    name: "æª¢æŸ¥åŸºç¤ Car é¡åˆ¥",
                    check: () => {
                        if (typeof Car !== 'function') throw new Error("æ‰¾ä¸åˆ° Car é¡åˆ¥ (æœªå®šç¾©æˆ–å‘½åéŒ¯èª¤)");
                        const c = new Car("TestBrand");
                        if (!c.brand) throw new Error("Car å¯¦ä¾‹æ²’æœ‰ brand å±¬æ€§");
                        return "Car é¡åˆ¥å­˜åœ¨ä¸”å±¬æ€§æ­£ç¢º";
                    }
                },
                {
                    name: "æª¢æŸ¥ SportsCar (ç¹¼æ‰¿èˆ‡å±¬æ€§)",
                    check: () => {
                        if (typeof SportsCar !== 'function') throw new Error("æ‰¾ä¸åˆ° SportsCar é¡åˆ¥");
                        const s = new SportsCar("Ferrari");
                        if (!(s instanceof Car)) throw new Error("SportsCar æ²’æœ‰ç¹¼æ‰¿è‡ª Car");
                        if (s.topSpeed === undefined) throw new Error("æ‰¾ä¸åˆ° topSpeed å±¬æ€§");
                        if (s.topSpeed <= 250) throw new Error(`topSpeed (${s.topSpeed}) æ‡‰è©²è¦ > 250`);
                        return "SportsCar ç¹¼æ‰¿æ­£ç¢ºä¸”é€Ÿåº¦é”æ¨™";
                    }
                },
                {
                    name: "æª¢æŸ¥ FamilyVan (ç¹¼æ‰¿èˆ‡å±¬æ€§)",
                    check: () => {
                        if (typeof FamilyVan !== 'function') throw new Error("æ‰¾ä¸åˆ° FamilyVan é¡åˆ¥");
                        const f = new FamilyVan("Toyota");
                        if (!(f instanceof Car)) throw new Error("FamilyVan æ²’æœ‰ç¹¼æ‰¿è‡ª Car");
                        if (f.seatCount === undefined) throw new Error("æ‰¾ä¸åˆ° seatCount å±¬æ€§");
                        if (f.seatCount < 7) throw new Error(`seatCount (${f.seatCount}) æ‡‰è©²è¦ >= 7`);
                        return "FamilyVan ç¹¼æ‰¿æ­£ç¢ºä¸”åº§ä½è¶³å¤ ";
                    }
                },
                {
                    name: "æª¢æŸ¥ HeavyTruck (ç¹¼æ‰¿èˆ‡å±¬æ€§)",
                    check: () => {
                        if (typeof HeavyTruck !== 'function') throw new Error("æ‰¾ä¸åˆ° HeavyTruck é¡åˆ¥");
                        const t = new HeavyTruck("Volvo");
                        if (!(t instanceof Car)) throw new Error("HeavyTruck æ²’æœ‰ç¹¼æ‰¿è‡ª Car");
                        if (t.cargoCapacity === undefined) throw new Error("æ‰¾ä¸åˆ° cargoCapacity å±¬æ€§");
                        if (t.cargoCapacity <= 1000) throw new Error(`cargoCapacity (${t.cargoCapacity}) æ‡‰è©²è¦ > 1000`);
                        return "HeavyTruck ç¹¼æ‰¿æ­£ç¢ºä¸”è¼‰é‡é”æ¨™";
                    }
                }
            ];

            // åŸ·è¡Œæ¸¬è©¦
            for (let i = 0; i < tests.length; i++) {
                const test = tests[i];
                const el = createTestItem(test.name, `test-${i}`);
                
                // ç¨å¾®å»¶é²è®“ UI æœ‰è·‘å‹•çš„æ„Ÿè¦º
                await new Promise(r => setTimeout(r, 500));

                try {
                    const msg = test.check();
                    updateTestStatus(el, true, msg);
                } catch (e) {
                    updateTestStatus(el, false, e.message);
                }
            }

            // æœ€çµ‚çµæœ
            if (allPassed) {
                statusBanner.className = "p-4 text-center font-bold text-lg bg-green-500 text-white";
                statusBanner.textContent = "ğŸ‰ æ­å–œï¼å…¨æ•¸é€šéæ¸¬è©¦";
                log("æ¸¬è©¦çµæŸï¼šåˆæ ¼", 'success');
            } else {
                statusBanner.className = "p-4 text-center font-bold text-lg bg-red-500 text-white";
                statusBanner.textContent = "âš ï¸ æ¸¬è©¦å¤±æ•—ï¼Œè«‹æª¢æŸ¥ä¸‹æ–¹éŒ¯èª¤è¨Šæ¯";
                log("æ¸¬è©¦çµæŸï¼šä¸åˆæ ¼", 'error');
            }
        }

        // è‡ªå‹•åŸ·è¡Œ
        window.onload = () => {
            // æª¢æŸ¥æ˜¯å¦æˆåŠŸè¼‰å…¥ js æª”æ¡ˆ
            setTimeout(() => {
                if (typeof Car === 'undefined') {
                    log("éŒ¯èª¤ï¼šç„¡æ³•è®€å– cars.jsï¼Œè«‹ç¢ºèªæª”æ¡ˆæ˜¯å¦å­˜åœ¨æ–¼åŒä¸€ç›®éŒ„", "error");
                    createTestItem("æª”æ¡ˆè®€å–æª¢æŸ¥", "file-check");
                    updateTestStatus(document.getElementById("file-check"), false, "æ‰¾ä¸åˆ° cars.js");
                    statusBanner.className = "p-4 text-center font-bold text-lg bg-red-500 text-white";
                    statusBanner.textContent = "âŒ æª”æ¡ˆè®€å–å¤±æ•—";
                } else {
                    runTests();
                }
            }, 100);
        };
    </script>
</body>
</html>