<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPG å¡ç‰‡æ¨£å¼æª¢æ¸¬ç³»çµ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="css_test.css">

    <style>
        /* Console UI æ¨£å¼ */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }
        
        .console-text { font-family: 'Menlo', 'Monaco', 'Courier New', monospace; }
        
        /* æ¸¬è©¦æ²™ç›’ï¼šé€™è£¡æ¨¡æ“¬é¡Œç›®è¦æ±‚çš„ HTML çµæ§‹ï¼Œä½†æˆ‘å€‘æŠŠå®ƒç¸®å°æ”¾æ—é‚Šï¼Œä»¥å…å¹²æ“¾ Console */
        #test-sandbox {
            border: 2px dashed #4b5563;
            padding: 20px;
            margin-bottom: 20px;
            background: #111827;
            display: flex;
            gap: 10px;
            justify-content: center;
            opacity: 1; /* å¿…é ˆé¡¯ç¤ºï¼Œä¸ç„¶ getComputedStyle æŠ“ä¸åˆ°æ•¸å€¼ */
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 min-h-screen p-4 md:p-8 flex justify-center items-start">

    <div class="w-full max-w-4xl space-y-6">

        <div class="bg-slate-800 rounded-xl shadow-lg border border-slate-700 overflow-hidden">
            <header class="bg-indigo-900/80 p-6 border-b border-indigo-700/50 flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-bold text-white flex items-center gap-2">
                        ğŸ›¡ï¸ æ¨£å¼æª¢æ¸¬å™¨ (Style Inspector)
                    </h1>
                    <p class="text-indigo-200 text-sm mt-1 opacity-80">CSS Pseudo-elements & Classes è‡ªå‹•æ¸¬è©•</p>
                </div>
                <div id="status-badge" class="px-4 py-2 rounded-lg font-bold bg-slate-700 text-slate-400 text-sm">
                    ç­‰å¾…åˆ†æ...
                </div>
            </header>

            <div class="p-4 bg-slate-900/50 text-center text-xs text-slate-500 uppercase tracking-widest border-b border-slate-700">
                Live Preview (Test Sandbox)
            </div>
            
            <div id="test-sandbox">
                <div class="card">
                    <h3>Warrior</h3>
                    <ul><li>ATK: 100</li></ul>
                </div>
                <div class="card popular">
                    <h3>Mage</h3>
                    <ul><li>ATK: 120</li></ul>
                </div>
                <div class="card">
                    <h3>Rogue</h3>
                    <ul><li>ATK: 90</li></ul>
                </div>
            </div>

            <div class="bg-black border-t border-slate-700 font-mono text-xs md:text-sm">
                <div class="bg-slate-800 px-4 py-2 text-slate-400 flex items-center gap-2 border-b border-slate-700">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="4 17 10 11 4 5"/><line x1="12" x2="20" y1="19" y2="19"/></svg>
                    <span>Inspector Log</span>
                </div>
                <div id="console-output" class="h-64 overflow-y-auto p-4 space-y-1 console-text text-slate-300">
                    <div class="opacity-50">> Ready to inspect style.css...</div>
                </div>
            </div>

            <div class="p-4 bg-slate-800 border-t border-slate-700 flex justify-end gap-3">
                <button onclick="location.reload()" class="px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded transition text-sm font-bold">
                    é‡æ–°æ•´ç†
                </button>
                <button onclick="runTests()" class="px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded shadow-lg transition transform hover:-translate-y-0.5 text-sm font-bold">
                    åŸ·è¡Œæª¢æ¸¬ (Inspect)
                </button>
            </div>
        </div>
    </div>

    <script>
        const consoleOutput = document.getElementById('console-output');
        const statusBadge = document.getElementById('status-badge');
        let hasError = false;

        // æ¨¡æ“¬ Console Log
        function log(msg, type = 'info', detail = null) {
            const div = document.createElement('div');
            const timestamp = new Date().toLocaleTimeString('en-US', { hour12: false });
            
            let colorClass = "text-slate-300";
            let icon = "";

            if (type === 'error') {
                colorClass = "text-red-400";
                icon = "âŒ";
                hasError = true;
            } else if (type === 'success') {
                colorClass = "text-green-400";
                icon = "âœ…";
            } else if (type === 'warn') {
                colorClass = "text-yellow-400";
                icon = "âš ï¸";
            }

            div.className = `${colorClass} border-l-2 ${type === 'error' ? 'border-red-500' : (type === 'success' ? 'border-green-500' : 'border-slate-600')} pl-2 mb-1`;
            div.innerHTML = `
                <div class="flex items-center gap-2">
                    <span class="opacity-50 text-xs">[${timestamp}]</span> 
                    <span>${icon} ${msg}</span>
                </div>
                ${detail ? `<div class="ml-12 text-xs opacity-70 mt-1 text-slate-400">${detail}</div>` : ''}
            `;

            consoleOutput.appendChild(div);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }

        const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        // æ ¸å¿ƒæª¢æ¸¬é‚è¼¯
        async function runTests() {
            consoleOutput.innerHTML = '';
            hasError = false;
            statusBadge.className = "px-4 py-2 rounded-lg font-bold bg-blue-600 text-white animate-pulse";
            statusBadge.textContent = "æ¨£å¼åˆ†æä¸­...";
            
            log("åˆå§‹åŒ– CSS è§£æå¼•æ“...", 'info');
            await wait(500);

            // å–å¾—æ¸¬è©¦å…ƒç´ 
            const cards = document.querySelectorAll('.card');
            const popularCard = document.querySelector('.card.popular');

            // 1. æª¢æŸ¥æ˜¯å¦è¼‰å…¥ CSS (èƒŒæ™¯è‰²æª¢æ¸¬)
            log("æª¢æŸ¥åŸºç¤æ¨£å¼é€£çµ...", 'info');
            const bg = window.getComputedStyle(cards[0]).backgroundColor;
            // é è¨­èƒŒæ™¯é€šå¸¸æ˜¯ rgba(0, 0, 0, 0)
            if (bg === 'rgba(0, 0, 0, 0)' || bg === 'transparent') {
                log("æª¢æ¸¬å¤±æ•—ï¼šå¡ç‰‡ä¼¼ä¹æ²’æœ‰èƒŒæ™¯é¡è‰²", 'error', "è«‹ç¢ºèª style.css æ˜¯å¦å­˜åœ¨ï¼Œä¸” .card æœ‰è¨­å®š background-colorã€‚");
            } else {
                log(`åŸºç¤æ¨£å¼å·²è¼‰å…¥ (Detected bg: ${bg})`, 'success');
            }
            await wait(300);

            // 2. æª¢æŸ¥ ::before å½å…ƒç´  (é‡é»)
            log("åˆ†æå½å…ƒç´  ::before (Rare Tag)...", 'info');
            const beforeContent = window.getComputedStyle(popularCard, '::before').getPropertyValue('content');
            const beforePos = window.getComputedStyle(popularCard, '::before').getPropertyValue('position');

            // getComputedStyle å›å‚³ content æœƒåŒ…å«å¼•è™Ÿï¼Œä¾‹å¦‚ '"RARE"'ï¼Œå¦‚æœæ˜¯ none å‰‡ä»£è¡¨æ²’è¨­å®š
            if (beforeContent && beforeContent !== 'none' && beforeContent !== 'normal') {
                log(`å½å…ƒç´ å…§å®¹æª¢æ¸¬é€šé: ${beforeContent}`, 'success');
                
                if (beforePos === 'absolute') {
                    log("å½å…ƒç´ å®šä½è¨­å®šæ­£ç¢º (Absolute)", 'success');
                } else {
                    log("å®šä½è¨­å®šè­¦å‘Š", 'warn', "å»ºè­°å°‡ ::before è¨­ç‚º 'position: absolute' ä»¥ä¾¿æ’ç‰ˆæ–¼å³ä¸Šè§’ã€‚");
                }
            } else {
                log("æ‰¾ä¸åˆ° ::before å½å…ƒç´ ", 'error', "è«‹ç¢ºèª .popular::before æ˜¯å¦è¨­å®šäº† content å±¬æ€§ (å¦‚ content: 'RARE')ã€‚");
            }
            await wait(300);

            // 3. æª¢æŸ¥ :hover éæ¸¡æ•ˆæœ
            log("åˆ†æäº’å‹•é«”é©— (:hover transition)...", 'info');
            const transition = window.getComputedStyle(cards[0]).transition;
            
            // æª¢æŸ¥æ˜¯å¦æœ‰è¨­å®š transition (all 0s ease 0s ä»£è¡¨é è¨­å€¼/ç„¡)
            if (transition && transition !== 'all 0s ease 0s' && transition !== '') {
                log("åµæ¸¬åˆ°å‹•ç•«éæ¸¡æ•ˆæœ (Transition)", 'success');
            } else {
                log("æœªåµæ¸¬åˆ° Transition", 'warn', "é›–ç„¶ :hover åŠŸèƒ½å¯èƒ½æ­£å¸¸ï¼Œä½†å»ºè­°åŠ å…¥ transition å±¬æ€§è®“é«”é©—æ›´å¹³æ»‘ã€‚");
            }
            await wait(300);

            // 4. æª¢æŸ¥ :nth-child æˆ–ç‰¹æ®Šæ¨£å¼
            log("åˆ†æçµæ§‹é¸å–å™¨ (:nth-child)...", 'info');
            const border1 = window.getComputedStyle(cards[0]).border;
            const border2 = window.getComputedStyle(cards[1]).border;

            // ç°¡å–®æ¯”å°ç¬¬ä¸€å¼µè·Ÿç¬¬äºŒå¼µå¡ç‰‡çš„æ¨£å¼æ˜¯å¦æœ‰å·®ç•°
            if (border1 !== border2) {
                log("æª¢æ¸¬åˆ°ä¸åŒå¡ç‰‡æœ‰å·®ç•°åŒ–æ¨£å¼", 'success');
            } else {
                log("æœªæª¢æ¸¬åˆ°æ¨£å¼å·®ç•°", 'info', "æç¤ºï¼šå¯ä»¥ä½¿ç”¨ :nth-child(2) ç‚ºä¸­é–“å¡ç‰‡æ·»åŠ ç‰¹æ®Šé‚Šæ¡†ã€‚");
            }

            await wait(200);

            // æœ€çµ‚åˆ¤å®š
            if (!hasError) {
                statusBadge.className = "px-4 py-2 rounded-lg font-bold bg-green-500 text-white";
                statusBadge.textContent = "ğŸ‰ é©—è­‰é€šé";
                log("åˆ†æå®Œæˆï¼šæ¨£å¼ç¬¦åˆæ¨™æº–ã€‚", 'success');
            } else {
                statusBadge.className = "px-4 py-2 rounded-lg font-bold bg-red-500 text-white";
                statusBadge.textContent = "âš ï¸ é©—è­‰æœªé€šé";
                log("åˆ†æå®Œæˆï¼šè«‹ä¿®æ­£ä¸Šè¿°éŒ¯èª¤å¾Œé‡è©¦ã€‚", 'error');
            }
        }
        
        // è‡ªå‹•åŸ·è¡Œæª¢æŸ¥ (å¦‚æœæª”æ¡ˆå­˜åœ¨)
        window.onload = () => {
             // ç°¡å–®æª¢æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯ç©ºçš„
            const testEl = document.querySelector('.card');
            if(window.getComputedStyle(testEl).width === 'auto') {
                log("ç­‰å¾… style.css è¼‰å…¥...", 'info');
            } else {
                setTimeout(runTests, 500);
            }
        }
    </script>
</body>
</html>